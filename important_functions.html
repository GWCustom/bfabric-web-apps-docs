
<!DOCTYPE html>


<html lang="Python" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Important Functions &#8212; bfabric-web-apps 20.12.2024 documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!-- 
    this give us a css class that will be invisible only if js is disabled 
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=26a4bc78f4c0ddb94549" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/sidebar-nav.css?v=0dc337ef" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css?v=af8e464a" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=26a4bc78f4c0ddb94549"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549" />

    <script src="_static/documentation_options.js?v=ff720171"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'important_functions';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="Python"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
<header class="bd-header navbar navbar-expand-lg bd-navbar">
  <div class="bd-header__inner bd-page-width">
    
    <!-- Left Side: Logo -->
    <div class="navbar-header-items__start">
      <a class="navbar-brand logo" href="index.html">
        <img src="_static/gwc_logo_simple_rgb_blue.png" class="logo__image only-light" alt="Bfabric Web Apps">
        <img src="_static/gwc_logo_simple_rgb_white.png" class="logo__image only-dark" alt="Bfabric Web Apps">
      </a>
    </div>

    <!-- Center: Title -->
    <div class="navbar-header-items__center">
      <span class="navbar-text">Bfabric Web Apps Documentation</span>
    </div>

    <!-- Right Side: Search & Light/Dark Mode -->
    <div class="navbar-header-items__end">

      <!-- Search -->
      <button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search">
        <i class="fa-solid fa-magnifying-glass"></i>
        <span class="search-button__default-text">Search</span>
        <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
      </button>

      <!-- Light/Dark Mode Switch -->
      <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode">
        <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light" title="Light"></i>
        <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark" title="Dark"></i>
        <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto" title="System Settings"></i>
      </button>

    </div>

  </div>
</header>

  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo_light.png" class="logo__image only-light" alt="bfabric-web-apps 20.12.2024 documentation - Home"/>
    <img src="_static/logo_dark.png" class="logo__image only-dark pst-js-only" alt="bfabric-web-apps 20.12.2024 documentation - Home"/>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><div class="sidebar-item" style="overflow: visible; height: auto; max-height: none;">
  <h3>Navigation Bar</h3>
  <ul class="sidebar-nav" style="overflow: visible; height: auto; max-height: none;">
    <li><a href="index.html">Introduction</a></li>
    <li><a href="installation.html">Installation Guide</a></li>

    <li>
      <a href="bfabric_web_apps_functions.html">Library Docs</a>
      <ul>
        <li><a href="global_variables.html">Global Variables</a></li>
        <li><a href="important_components.html">Important Components</a></li>
        <li><a href="#">Important Functions</a></li>
      </ul>
    </li>

    <li>
      <a href="usage.html">Template Usage</a>
      <ul>
        <li><a href="installation_template.html">Template Deployment Guide</a></li>
        <li><a href="index_basic_py.html">Minimal Template</a></li>
        <li><a href="index_py.html">Full-Featured Template</a></li>
        <li><a href="index_redis.html">Redis Template</a></li>
      </ul>
    </li>

    <li>
      <a href="use_case.html">Use Case</a>
      <ul>
        <li><a href="rna_seq_use_case.html">RNA-seq Use Case</a></li>
        <li><a href="demultiplex_use_case.html">Demultiplex Use Case</a></li>
        <li><a href="sushi_use_case.html">SUSHI Use Case</a></li>
      </ul>
    </li>

    <li>
      <a href="video_tutorials.html">Video Tutorials</a>
      <ul>
        <li><a href="deploying_video_tutorials.html">Deploying Tutorials</a></li>
      </ul>
    </li>

  </ul>
</div></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">

<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    <li class="breadcrumb-item active" aria-current="page"><span class="ellipsis">Important Functions</span></li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="important-functions">
<h1>Important Functions<a class="headerlink" href="#important-functions" title="Link to this heading">#</a></h1>
<p>This section provides an in-depth explanation of the <strong>core functions</strong> used in <strong>bfabric_web_apps</strong>. These functions are responsible for <strong>authentication, layout management, logging, API interactions, bug reporting</strong> and more.</p>
<hr class="docutils" />
<section id="application-initialization">
<h2>1. Application Initialization<a class="headerlink" href="#application-initialization" title="Link to this heading">#</a></h2>
<section id="create-app">
<h3>create_app()<a class="headerlink" href="#create-app" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">create_app()</span></code> function initializes a <strong>Dash app instance</strong> with pre-configured settings suitable for use with B-Fabric, including responsive design and Bootstrap-based styling. This function simplifies starting a new Dash app by applying common configurations.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">create_app()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/utils/app_init.py">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span> <span class="o">=</span> <span class="n">create_app</span><span class="p">()</span>
</pre></div>
</div>
<section id="returns">
<h4>Returns:<a class="headerlink" href="#returns" title="Link to this heading">#</a></h4>
<p>A Dash app instance with support for dynamic callbacks and responsive design.</p>
</section>
<hr class="docutils" />
<section id="return-type">
<h4>Return type:<a class="headerlink" href="#return-type" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">dash.Dash</span></code></p>
</section>
<hr class="docutils" />
<section id="example-usage">
<h4>Example Usage<a class="headerlink" href="#example-usage" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bfabric_web_apps</span> <span class="kn">import</span> <span class="n">create_app</span>

<span class="c1"># Create an instance of the Dash app using the create_app function.</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">create_app</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="understanding-the-app-object-in-dash">
<h3>Understanding the app Object in Dash<a class="headerlink" href="#understanding-the-app-object-in-dash" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">app</span></code> object is an instance of the <code class="docutils literal notranslate"><span class="pre">Dash</span></code> class from the <a class="reference external" href="https://dash.plotly.com/"><code class="docutils literal notranslate"><span class="pre">dash</span></code></a> library. It serves as the central object of a Dash application, managing the layout, callbacks, and overall app configuration. The <code class="docutils literal notranslate"><span class="pre">Dash()</span></code> class is used to create an instance of a Dash application. It initializes the app, providing the structure to define its layout and interactivity. The <code class="docutils literal notranslate"><span class="pre">Dash()</span></code> class serves as the foundation for building Dash applications, allowing developers to add components like HTML elements, interactive controls, and graphs.</p>
<p>For more details on defining layouts in Dash, refer to the <a class="reference external" href="https://dash.plotly.com/layout#dash-layout">Dash Layout Documentation</a>.</p>
</section>
</section>
<hr class="docutils" />
<section id="ui-and-layout-management">
<h2>2. UI and Layout Management<a class="headerlink" href="#ui-and-layout-management" title="Link to this heading">#</a></h2>
<section id="get-static-layout">
<h3>get_static_layout()<a class="headerlink" href="#get-static-layout" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">get_static_layout()</span></code> function combines various <strong>UI components</strong> into a structured Dash layout with pre-defined tabs for <strong>Main</strong>, <strong>Documentation</strong>, and <strong>Report a Bug</strong>. This layout ensures a consistent look and feel across B-Fabric applications, while allowing customization of the main content and documentation.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">get_static_layout()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/layouts/layouts.py#L4">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">get_static_layout</span><span class="p">(</span><span class="n">app_title</span><span class="p">,</span> <span class="n">main_content</span><span class="p">,</span> <span class="n">documentation_content</span><span class="p">)</span>
</pre></div>
</div>
<section id="args">
<h4>Args:<a class="headerlink" href="#args" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p><strong>base_title</strong> (<em>str</em>, optional): The title displayed in the browser tab. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>main_content</strong> (<em>Dash HTML Component</em>, optional): The main content displayed in the &quot;Main&quot; tab. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><strong>documentation_content</strong> (<em>Dash HTML Component</em>, optional): The static documentation displayed under the &quot;Documentation&quot; tab. Defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ol>
</section>
<hr class="docutils" />
<section id="id1">
<h4>Returns:<a class="headerlink" href="#id1" title="Link to this heading">#</a></h4>
<p>A Dash layout containing the specified content along with static tabs for <strong>Main</strong>, <strong>Documentation</strong>, and <strong>Report a Bug</strong>.</p>
</section>
<hr class="docutils" />
<section id="id2">
<h4>Return type:<a class="headerlink" href="#id2" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">dash.html.Div</span></code></p>
</section>
<hr class="docutils" />
<section id="id3">
<h4>Example Usage<a class="headerlink" href="#id3" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Import the &#39;html&#39; module from Dash</span>
<span class="kn">from</span> <span class="nn">dash</span> <span class="kn">import</span> <span class="n">html</span>

<span class="n">sidebar</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span><span class="o">...</span><span class="p">])</span>  <span class="c1"># Custom sidebar content</span>
<span class="n">content</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span><span class="o">...</span><span class="p">])</span>  <span class="c1"># Main app content</span>
<span class="n">documentation</span> <span class="o">=</span> <span class="n">html</span><span class="o">.</span><span class="n">Div</span><span class="p">([</span><span class="o">...</span><span class="p">])</span>  <span class="c1"># Documentation content</span>

<span class="c1"># Set the layout of the app</span>
<span class="n">app</span><span class="o">.</span><span class="n">layout</span> <span class="o">=</span> <span class="n">get_static_layout</span><span class="p">(</span><span class="s2">&quot;My App&quot;</span><span class="p">,</span> <span class="n">sidebar</span><span class="p">,</span> <span class="n">documentation</span><span class="p">)</span>
</pre></div>
</div>
<p>For detailed guidance on implementing and structuring layouts, please refer to the official <a class="reference external" href="https://dash.plotly.com/layout">Dash documentation</a>.</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="authentication-token-handling">
<h2>3. Authentication &amp; Token Handling<a class="headerlink" href="#authentication-token-handling" title="Link to this heading">#</a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h3>
<p>The B-Fabric authentication flow is designed to be straightforward and seamless for users of the <code class="docutils literal notranslate"><span class="pre">bfabric_web_apps</span></code> library. For a deeper theoretical explanation of the authentication and token handling process, along with a detailed look at the function output, refer to the chapter <strong><a class="reference internal" href="important_components.html#authentication--token-handling"><span class="std std-ref">Important Components</span></a></strong>. While the underlying logic is abstracted away from the user, the following section provides an overview of how authentication and token processing works in practice.</p>
</section>
<hr class="docutils" />
<section id="process-url-and-token">
<h3>process_url_and_token()<a class="headerlink" href="#process-url-and-token" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">process_url_and_token()</span></code> function processes URL parameters to extract and validate authentication tokens, retrieve related entity data, and prepare page content for B-Fabric applications.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">process_url_and_token()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/utils/callbacks.py#L8">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">process_url_and_token</span><span class="p">(</span><span class="n">url_params</span><span class="p">)</span>
</pre></div>
</div>
<section id="id4">
<h4>Args:<a class="headerlink" href="#id4" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p><strong>url_params</strong> (<em>str</em>):<br />
The URL parameters containing the token (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;?token=abc123&quot;</span></code>).</p></li>
</ol>
</section>
<hr class="docutils" />
<section id="processing-steps">
<h4>Processing Steps:<a class="headerlink" href="#processing-steps" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p><strong>Check for <code class="docutils literal notranslate"><span class="pre">url_params</span></code></strong>:</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">url_params</span></code> is empty or <code class="docutils literal notranslate"><span class="pre">None</span></code>, the function immediately returns <code class="docutils literal notranslate"><span class="pre">None</span></code> for the token, token data, entity data, app data, session details, <code class="docutils literal notranslate"><span class="pre">None</span></code> for the job link, and a default <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code> for the page title.</p></li>
</ul>
</li>
<li><p><strong>Extract the token</strong>:</p>
<ul class="simple">
<li><p>Splits the <code class="docutils literal notranslate"><span class="pre">url_params</span></code> string to find the segment after <code class="docutils literal notranslate"><span class="pre">token=</span></code>.</p></li>
<li><p>This extracted string is treated as the token.</p></li>
</ul>
</li>
<li><p><strong>Validate the token</strong>:</p>
<ul class="simple">
<li><p>Calls <code class="docutils literal notranslate"><span class="pre">BfabricInterface.token_to_data(token)</span></code> to validate the token.</p></li>
<li><p>If the token is expired (<code class="docutils literal notranslate"><span class="pre">&quot;EXPIRED&quot;</span></code>), returns <code class="docutils literal notranslate"><span class="pre">None</span></code> for the token, token data, entity data, app_data, session details, job link, and a default <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code> for the page title.</p></li>
<li><p>If the token is invalid or not found, the function also returns <code class="docutils literal notranslate"><span class="pre">None</span></code> values for these fields and uses <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code> for the page title.</p></li>
</ul>
</li>
<li><p><strong>Retrieve entity data and app data</strong>:</p>
<ul class="simple">
<li><p>On successful token validation, loads the token data (<code class="docutils literal notranslate"><span class="pre">tdata</span></code>) from JSON.</p></li>
<li><p>Calls <code class="docutils literal notranslate"><span class="pre">BfabricInterface.entity_data(tdata)</span></code> to fetch entity details and parses it into <code class="docutils literal notranslate"><span class="pre">entity_data</span></code>.</p></li>
<li><p>Calls <code class="docutils literal notranslate"><span class="pre">BfabricInterface.app_data(tdata)</span></code> to fetch app-related information and parses it into <code class="docutils literal notranslate"><span class="pre">app_data</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Generate page title</strong>:</p>
<ul class="simple">
<li><p>Constructs a string based on the entity class, entity name, and environment.</p></li>
<li><p>Falls back to <code class="docutils literal notranslate"><span class="pre">&quot;Bfabric</span> <span class="pre">App</span> <span class="pre">Interface&quot;</span></code> if key fields are missing.</p></li>
</ul>
</li>
<li><p><strong>Construct job link</strong>:</p>
<ul class="simple">
<li><p>Extracts the <code class="docutils literal notranslate"><span class="pre">jobId</span></code> from the token data (<code class="docutils literal notranslate"><span class="pre">tdata</span></code>).</p></li>
<li><p>Checks the environment (test or production) and constructs the corresponding B-Fabric job URL with <code class="docutils literal notranslate"><span class="pre">jobId</span></code>.</p></li>
<li><p>If no <code class="docutils literal notranslate"><span class="pre">jobId</span></code> is present, <code class="docutils literal notranslate"><span class="pre">job_link</span></code> defaults to <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
</ul>
</li>
<li><p><strong>Compose session details</strong>:</p>
<ul class="simple">
<li><p>Builds a list of Dash HTML components containing summary information about the entity, token details, and app metadata.</p></li>
<li><p>Includes environment, job ID, user name, session expiration time, and the current timestamp.</p></li>
</ul>
</li>
</ol>
</section>
<hr class="docutils" />
<section id="id5">
<h4>Returns:<a class="headerlink" href="#id5" title="Link to this heading">#</a></h4>
<p>The function returns a 7-element tuple, which varies depending on whether authentication succeeds or fails.</p>
<ol class="arabic simple">
<li><p><strong>Authenticated Case</strong>:</p>
<ul class="simple">
<li><p><strong>Returns</strong>:</p>
<ol class="arabic simple">
<li><p><strong>token</strong> (<em>str</em>): The extracted token string.</p></li>
<li><p><strong>token_data</strong> (<em>dict</em>): A dictionary containing valid user and environment data.</p></li>
<li><p><strong>entity_data</strong> (<em>dict</em>): Details about the current entity (e.g., name, class).</p></li>
<li><p><strong>app_data</strong> (<em>dict</em>): Information about the related application (e.g., name, description).</p></li>
<li><p><strong>page_title</strong> (<em>str</em>): A dynamically generated string based on token and entity data.</p></li>
<li><p><strong>session_details</strong> (<em>list</em>): A list of Dash HTML components summarizing the session.</p></li>
<li><p><strong>job_link</strong> (<em>str</em>): Dynamically generated link to the job page (if <code class="docutils literal notranslate"><span class="pre">jobId</span></code> is provided).</p></li>
</ol>
</li>
<li><p><strong>Return Type</strong>:<br />
<em>(str, dict, dict, dict, str, list, str)</em></p></li>
</ul>
</li>
<li><p><strong>Authentication Fails</strong>:</p>
<ul class="simple">
<li><p><strong>Returns</strong>:</p>
<ol class="arabic simple">
<li><p><strong>token</strong>: <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><strong>token_data</strong>: <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><strong>entity_data</strong>: <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><strong>app_data</strong>: <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><strong>page_title</strong> (<em>str</em>): Defaults to <code class="docutils literal notranslate"><span class="pre">&quot;</span> <span class="pre">&quot;</span></code>.</p></li>
<li><p><strong>session_details</strong>: <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
<li><p><strong>job_link</strong>: <code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ol>
</li>
<li><p><strong>Return Type</strong>:<br />
<em>(None, None, None, None, str, None, None)</em></p></li>
</ul>
</li>
</ol>
</section>
<hr class="docutils" />
<section id="example-usage-callback-integration">
<h4>Example Usage - Callback Integration<a class="headerlink" href="#example-usage-callback-integration" title="Link to this heading">#</a></h4>
<p>This function is typically used within a Dash callback to manage authentication. As a reference, you can check out how this function is used in <a class="reference external" href="https://github.com/GWCustom/bfabric-web-app-template/blob/main/generic_bfabric.py#L44"><code class="docutils literal notranslate"><span class="pre">generic_bfabric.py</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;token&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">),</span>                <span class="c1"># Store authentication token.</span>
        <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;token_data&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">),</span>           <span class="c1"># Store token metadata.</span>
        <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;entity&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">),</span>               <span class="c1"># Store entity data.</span>
        <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;app_data&#39;</span><span class="p">,</span> <span class="s1">&#39;data&#39;</span><span class="p">),</span>               <span class="c1"># Store app data.</span>
        <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;page-title&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>       <span class="c1"># Update page title.</span>
        <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;session-details&#39;</span><span class="p">,</span> <span class="s1">&#39;children&#39;</span><span class="p">),</span>  <span class="c1"># Update session details.</span>
        <span class="n">Output</span><span class="p">(</span><span class="s1">&#39;dynamic-link&#39;</span><span class="p">,</span> <span class="s1">&#39;href&#39;</span><span class="p">)</span>  <span class="c1"># Directly update the button!</span>
    <span class="p">],</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s1">&#39;url&#39;</span><span class="p">,</span> <span class="s1">&#39;search&#39;</span><span class="p">)]</span>                    <span class="c1"># Extract token from URL parameters.</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">generic_process_url_and_token</span><span class="p">(</span><span class="n">url_params</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">process_url_and_token</span><span class="p">(</span><span class="n">url_params</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="logging">
<h2>4. Logging<a class="headerlink" href="#logging" title="Link to this heading">#</a></h2>
<section id="id6">
<h3>Overview<a class="headerlink" href="#id6" title="Link to this heading">#</a></h3>
<p>Logging in B-Fabric is crucial for tracking user actions, API calls, and errors. Logs are stored in B-Fabric's job history, ensuring transparency, accountability, and effective debugging.</p>
</section>
<hr class="docutils" />
<section id="accessing-logs-in-b-fabric">
<h3>Accessing Logs in B-Fabric<a class="headerlink" href="#accessing-logs-in-b-fabric" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p>Open the <strong>Job</strong> menu item (see screenshot).</p></li>
<li><p>Use filters or search by <strong>Job ID</strong> to find the relevant job.</p></li>
<li><p>Click on the <strong>Job ID</strong> to open the job details.</p></li>
<li><p>In the job details view, click on the <strong>Log</strong> entry to access all recorded logs for that job.</p></li>
</ol>
<p><img alt="Screenshot showing where to find logs in B-Fabric" src="_images/Logger_page.png" /></p>
<p>If the web application is based on the provided <strong><a class="reference internal" href="usage.html"><span class="std std-doc">templates</span></a></strong>, there is an additional way to find the logs.</p>
<section id="through-web-applications">
<h4>Through Web Applications<a class="headerlink" href="#through-web-applications" title="Link to this heading">#</a></h4>
<p>If the web applications are built using the provided <strong><a class="reference internal" href="usage.html"><span class="std std-doc">templates</span></a></strong>, a shortcut to logs is available:</p>
<ol class="arabic simple">
<li><p>In the application, locate the <strong>button in the top-right corner</strong> (see screenshot).</p></li>
<li><p>Clicking this button will <strong>directly open the corresponding logs</strong> for the job.</p></li>
</ol>
<p><img alt="Screenshot of the log button in web apps" src="_images/View_Logs.png" /></p>
</section>
</section>
<hr class="docutils" />
<section id="initializing-a-logger-instance">
<h3>Initializing a Logger Instance<a class="headerlink" href="#initializing-a-logger-instance" title="Link to this heading">#</a></h3>
<p>A logger instance is essential for tracking user actions, API calls, and errors within B-Fabric. This process ensures accountability and simplifies debugging by maintaining detailed logs of system events.</p>
<hr class="docutils" />
<section id="get-logger">
<h4>get_logger()<a class="headerlink" href="#get-logger" title="Link to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">get_logger()</span></code> function extracts logging-related information from <code class="docutils literal notranslate"><span class="pre">token_data</span></code> and initializes a <strong>Logger instance</strong> for managing and storing logs in B-Fabric.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">get_logger()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/utils/get_logger.py">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">L</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="n">token_data</span><span class="p">)</span>
</pre></div>
</div>
<section id="id7">
<h5>Args:<a class="headerlink" href="#id7" title="Link to this heading">#</a></h5>
<ol class="arabic simple">
<li><p><strong>token_data</strong> (<em>dict</em>): A dictionary containing token information. This is required to associate logs with the corresponding user or session in B-Fabric.</p></li>
</ol>
</section>
<section id="id8">
<h5>Returns:<a class="headerlink" href="#id8" title="Link to this heading">#</a></h5>
<p>A logger instance for managing and creating logs.</p>
</section>
</section>
<section id="id9">
<h4>Return Type::<a class="headerlink" href="#id9" title="Link to this heading">#</a></h4>
<p><code class="docutils literal notranslate"><span class="pre">bfabric_web_apps.Logger.Logger</span></code></p>
<section id="example">
<h5>Example<a class="headerlink" href="#example" title="Link to this heading">#</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check if token data is available</span>
<span class="k">if</span> <span class="n">token_data</span><span class="p">:</span>
    <span class="c1"># Initialize the logger instance</span>
    <span class="n">L</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="n">token_data</span><span class="p">)</span>
    
    <span class="c1"># Use logger instance to log a simple user action</span>
    <span class="n">L</span><span class="o">.</span><span class="n">log_operation</span><span class="p">(</span><span class="s2">&quot;User Login&quot;</span><span class="p">,</span> <span class="s2">&quot;User logged in successfully.&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="creating-logs-manual-and-automatic-methods">
<h3>Creating Logs: Manual and Automatic Methods<a class="headerlink" href="#creating-logs-manual-and-automatic-methods" title="Link to this heading">#</a></h3>
<p>Logging in B-Fabric enables tracking of system events through two key methods: <strong>manual logging</strong> with <code class="docutils literal notranslate"><span class="pre">log_operation()</span></code> and <strong>automatic logging</strong> with <code class="docutils literal notranslate"><span class="pre">logthis()</span></code>.</p>
<ul class="simple">
<li><p><strong>Use <code class="docutils literal notranslate"><span class="pre">log_operation()</span></code></strong> when you need to manually record specific user actions or system events, such as data submissions or logins.</p></li>
<li><p><strong>Use <code class="docutils literal notranslate"><span class="pre">logthis()</span></code></strong> when making API calls to automatically log execution details, including function names, input parameters, execution time, and results. This simplifies API monitoring by capturing all relevant context without additional manual logging.</p></li>
</ul>
<hr class="docutils" />
<section id="log-operation">
<h4>log_operation()<a class="headerlink" href="#log-operation" title="Link to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">log_operation()</span></code> function allows manual logging of user actions, storing these logs in <strong>B-Fabric's job history</strong>. It is commonly used for tracking specific events, such as data submissions or user logins.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">log_operation()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/objects/Logger.py#L69">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">log_operation</span><span class="p">(</span><span class="n">operation</span><span class="p">,</span> <span class="n">message</span><span class="p">,</span> <span class="n">params</span><span class="p">,</span> <span class="n">flush_logs</span><span class="p">)</span>
</pre></div>
</div>
<section id="id10">
<h5>Args:<a class="headerlink" href="#id10" title="Link to this heading">#</a></h5>
<ol class="arabic simple">
<li><p><strong>operation</strong> (<em>str</em>): A short event label describing the action (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;Login&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;Update</span> <span class="pre">Sample&quot;</span></code>).</p></li>
<li><p><strong>message</strong> (<em>str</em>): A detailed description of the event.</p></li>
<li><p><strong>params</strong> (<em>dict</em>, optional): Additional metadata related to the event. Defaults to <code class="docutils literal notranslate"><span class="pre">{}</span></code>.</p></li>
<li><p><strong>flush_logs</strong> (<em>bool</em>): Controls whether logs are immediately sent to the backend. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>: The log entry is appended to the local log storage and immediately flushed to the backend using the <code class="docutils literal notranslate"><span class="pre">flush_logs()</span></code> method. This ensures that the log is recorded in real time.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">False</span></code>: The log entry is stored locally and will remain in the local cache until the next time the <code class="docutils literal notranslate"><span class="pre">flush_logs()</span></code> method is explicitly called. This can be useful for batching multiple log entries to minimize backend calls.</p></li>
</ul>
</li>
</ol>
</section>
<hr class="docutils" />
<section id="id11">
<h5>Returns:<a class="headerlink" href="#id11" title="Link to this heading">#</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">None</span></code></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id12">
<h5>Example<a class="headerlink" href="#id12" title="Link to this heading">#</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check if token data is available</span>
<span class="k">if</span> <span class="n">token_data</span><span class="p">:</span>
    <span class="c1"># Initialize the logger instance</span>
    <span class="n">L</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="n">token_data</span><span class="p">)</span>
    <span class="c1"># Log a file upload action</span>
    <span class="n">L</span><span class="o">.</span><span class="n">log_operation</span><span class="p">(</span>
        <span class="n">operation</span> <span class="o">=</span><span class="s2">&quot;FileUpload&quot;</span><span class="p">,</span> 
        <span class="n">message</span> <span class="o">=</span> <span class="s2">&quot;User uploaded a CSV file&quot;</span><span class="p">,</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;data.csv&quot;</span><span class="p">},</span>
        <span class="n">flush_logs</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1">#The log entry is stored locally</span>
    <span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="logthis">
<h4>logthis()<a class="headerlink" href="#logthis" title="Link to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">logthis()</span></code> function automatically wraps an API call, logging essential details such as the function name, input parameters, execution time, and return values. This method simplifies logging for API interactions while capturing all necessary context.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">logthis()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/objects/Logger.py#L117">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">logthis</span><span class="p">(</span><span class="n">api_call</span><span class="p">,</span> <span class="n">args</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">flush_logs</span><span class="p">,</span> <span class="n">kwargs</span><span class="p">)</span>
</pre></div>
</div>
<section id="id13">
<h5>Args:<a class="headerlink" href="#id13" title="Link to this heading">#</a></h5>
<ol class="arabic simple">
<li><p><strong>api_call</strong> (<em>function</em>): The API function to execute. Example API calls could be <code class="docutils literal notranslate"><span class="pre">read</span></code> or <code class="docutils literal notranslate"><span class="pre">save</span></code>, depending on whether data needs to be retrieved or stored.</p></li>
<li><p><strong>endpoint</strong> (<em>str</em>): The endpoint to read from, e.g. &quot;sample&quot;.</p></li>
<li><p><strong>obj</strong> (<em>dict</em>) A dictionary containing the query, for every field multiple possible values can be provided, the final query requires the condition for each field to be met</p></li>
<li><p><strong>flush_logs</strong> (<em>bool</em>): Controls whether logs are immediately sent to the backend. Defaults to <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p>
<ul class="simple">
<li><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>: The log entry is appended to the local log storage and immediately flushed to the backend using the <code class="docutils literal notranslate"><span class="pre">flush_logs()</span></code> method. This ensures that the log is recorded in real time.</p></li>
<li><p>If <code class="docutils literal notranslate"><span class="pre">False</span></code>: The log entry is stored locally and will remain in the local cache until the next time the <code class="docutils literal notranslate"><span class="pre">flush_logs()</span></code> method is explicitly called. This can be useful for batching multiple log entries to minimize backend calls.</p></li>
</ul>
</li>
<li><p><strong>kwargs</strong>: These are keyword arguments passed directly to the API call. For example, <code class="docutils literal notranslate"><span class="pre">max_results</span></code> can be used to specify a cap on the number of results to query. This example applies specifically to a <code class="docutils literal notranslate"><span class="pre">read</span></code> API call. If provided as an integer, the number of results will be limited to the specified value. If set to <code class="docutils literal notranslate"><span class="pre">None</span></code>, the code will load all available pages. The function will continue fetching data page by page until either the maximum number of results is reached or all pages have been retrieved.</p></li>
</ol>
</section>
<hr class="docutils" />
<section id="id14">
<h5>Returns:<a class="headerlink" href="#id14" title="Link to this heading">#</a></h5>
<ul class="simple">
<li><p>The result of the API call.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id15">
<h5>Return Type:<a class="headerlink" href="#id15" title="Link to this heading">#</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">any</span></code></p></li>
</ul>
</section>
<hr class="docutils" />
<section id="id16">
<h5>Example<a class="headerlink" href="#id16" title="Link to this heading">#</a></h5>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">lane_samples</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">logthis</span><span class="p">(</span>
    <span class="n">api_call</span> <span class="o">=</span> <span class="n">wapper</span><span class="o">.</span><span class="n">read</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;rununitlane&quot;</span><span class="p">,</span>
    <span class="n">obj</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">elt</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">lane_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rununitlane&quot;</span><span class="p">,</span> <span class="p">[])]},</span>
    <span class="n">flush_logs</span> <span class="o">=</span> <span class="kc">False</span> <span class="c1">#The log entry is stored locally</span>
    <span class="n">max_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="c1">#Keyword arguments to pass to the API call (kwargs)</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="flush-logs">
<h3>flush_logs()<a class="headerlink" href="#flush-logs" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">flush_logs()</span></code> function is used to send all accumulated log entries to the backend at once and clear the local cache. This function is particularly useful when multiple logging operations have been performed with <code class="docutils literal notranslate"><span class="pre">flush_logs=False</span></code>, allowing logs to be batched and sent in a single request instead of logging each action individually. If no logs are stored, calling this function has no effect.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">flush_logs()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/objects/Logger.py#L103">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">L</span><span class="o">.</span><span class="n">flush_logs</span><span class="p">()</span>
</pre></div>
</div>
<section id="id17">
<h4>Args:<a class="headerlink" href="#id17" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>None</p></li>
</ul>
<hr class="docutils" />
</section>
<section id="id18">
<h4>Returns:<a class="headerlink" href="#id18" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>None</p></li>
</ul>
<hr class="docutils" />
</section>
<section id="behavior">
<h4>Behavior:<a class="headerlink" href="#behavior" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>If there are <strong>pending logs</strong> saved locally, they are flushed with a <strong>single API call</strong> to the backend, reducing the number of individual requests.</p></li>
<li><p>After a successful flush, the local log storage is cleared.</p></li>
<li><p>If no logs are pending, the function does nothing and exits immediately.</p></li>
</ul>
<hr class="docutils" />
</section>
<section id="id19">
<h4>Example<a class="headerlink" href="#id19" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialize the logger instance</span>
<span class="n">L</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">(</span><span class="n">token_data</span><span class="p">)</span>

<span class="c1"># Log multiple API calls without flushing immediately</span>
<span class="n">entity_data_list</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">logthis</span><span class="p">(</span>
    <span class="n">api_call</span><span class="o">=</span><span class="n">wrapper</span><span class="o">.</span><span class="n">read</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="n">endpoint</span><span class="p">,</span>
    <span class="n">obj</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="n">entity_id</span><span class="p">},</span>
    <span class="n">max_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">flush_logs</span><span class="o">=</span><span class="kc">False</span> <span class="c1"># Store log locally</span>
<span class="p">)</span>

<span class="n">lane_samples</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">logthis</span><span class="p">(</span>
    <span class="n">api_call</span><span class="o">=</span><span class="n">wrapper</span><span class="o">.</span><span class="n">read</span><span class="p">,</span>
    <span class="n">endpoint</span><span class="o">=</span><span class="s2">&quot;rununitlane&quot;</span><span class="p">,</span>
    <span class="n">obj</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="p">[</span><span class="nb">str</span><span class="p">(</span><span class="n">elt</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">lane_data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;rununitlane&quot;</span><span class="p">,</span> <span class="p">[])]},</span>
    <span class="n">max_results</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">flush_logs</span><span class="o">=</span><span class="kc">False</span> <span class="c1"># Store log locally</span>
<span class="p">)</span>

<span class="c1"># Flush all stored logs at once</span>
<span class="n">L</span><span class="o">.</span><span class="n">flush_logs</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<hr class="docutils" />
<section id="b-fabric-wrapper">
<h1>5. B-Fabric Wrapper<a class="headerlink" href="#b-fabric-wrapper" title="Link to this heading">#</a></h1>
<p>This chapter provides detailed documentation on obtaining and using the <strong>B-Fabric Wrapper</strong>, a crucial component in the B-Fabric application environment, designed for seamless interactions with the B-Fabric API.</p>
<hr class="docutils" />
<section id="id20">
<h2>Overview<a class="headerlink" href="#id20" title="Link to this heading">#</a></h2>
<p>The B-Fabric Wrapper is an authenticated object providing a convenient and secure way to perform API calls to B-Fabric, such as reading data or saving resources. It encapsulates authentication credentials and configurations needed to interact with the B-Fabric system.</p>
<p>The wrapper must be initialized by validating an authentication token before it can be retrieved and used for subsequent operations.</p>
</section>
<hr class="docutils" />
<section id="wrapper-initialization">
<h2>Wrapper Initialization<a class="headerlink" href="#wrapper-initialization" title="Link to this heading">#</a></h2>
<p>The wrapper initialization is handled internally by the system upon successful token validation. Users do not need to manually initialize the wrapper but must ensure that the authentication token has been validated first.</p>
</section>
<hr class="docutils" />
<section id="retrieving-the-b-fabric-wrapper">
<h2>Retrieving the B-Fabric Wrapper<a class="headerlink" href="#retrieving-the-b-fabric-wrapper" title="Link to this heading">#</a></h2>
<section id="get-wrapper">
<h3>get_wrapper()<a class="headerlink" href="#get-wrapper" title="Link to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">get_wrapper()</span></code> method returns the initialized B-Fabric wrapper. This method ensures that the wrapper is correctly configured and ready to use after token validation.</p>
<p>If the wrapper has not been initialized (due to the absence of prior token validation), the method will raise an error.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">get_wrapper()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/objects/BfabricInterface.py#L45">source code on GitHub</a>.</p>
<hr class="docutils" />
<section id="method-definition">
<h4>Method Definition<a class="headerlink" href="#method-definition" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_wrapper</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrapper</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Bfabric wrapper is not initialized. Token validation must run first.&quot;</span><span class="p">)</span>
    <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_wrapper</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="exception-handling">
<h3>Exception Handling<a class="headerlink" href="#exception-handling" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>RuntimeError:</strong> If the wrapper is requested before token validation, indicating that the wrapper has not yet been initialized.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="usage-example">
<h3>Usage Example<a class="headerlink" href="#usage-example" title="Link to this heading">#</a></h3>
<p>Here's how you can easily obtain and utilize the B-Fabric wrapper:</p>
<section id="importing-the-b-fabric-interface">
<h4>Importing the B-Fabric Interface<a class="headerlink" href="#importing-the-b-fabric-interface" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bfabric_web_apps.objects.BfabricInterface</span> <span class="kn">import</span> <span class="n">bfabric_interface</span>
</pre></div>
</div>
</section>
<section id="getting-the-wrapper">
<h4>Getting the Wrapper<a class="headerlink" href="#getting-the-wrapper" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Retrieve the B-Fabric wrapper after successful token validation</span>
<span class="n">wrapper</span> <span class="o">=</span> <span class="n">bfabric_interface</span><span class="o">.</span><span class="n">get_wrapper</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="important-considerations">
<h3>Important Considerations<a class="headerlink" href="#important-considerations" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>The wrapper object is <strong>essential</strong> for interacting with the B-Fabric API, and operations such as data queries (<code class="docutils literal notranslate"><span class="pre">read</span></code>) and submissions (<code class="docutils literal notranslate"><span class="pre">save</span></code>) rely on this wrapper.</p></li>
<li><p>Always ensure the wrapper is initialized by validating the authentication token beforehand. The token validation process happens automatically when using the provided B-Fabric workflow <strong><a class="reference internal" href="#l#process-url-and-token"><span class="std std-ref"><code class="docutils literal notranslate"><span class="pre">process_url_and_token</span></code></span></a></strong>.</p></li>
</ul>
<hr class="docutils" />
<section id="id21">
<h4>Example:<a class="headerlink" href="#id21" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bfabric_web_apps.utils.callbacks</span> <span class="kn">import</span> <span class="n">process_url_and_token</span>
<span class="kn">from</span> <span class="nn">bfabric_web_apps.objects.BfabricInterface</span> <span class="kn">import</span> <span class="n">bfabric_interface</span>

<span class="c1"># Validate token first (internally initializes wrapper)</span>
<span class="n">token</span><span class="p">,</span> <span class="n">token_data</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">process_url_and_token</span><span class="p">(</span><span class="n">url_params</span><span class="p">)</span>

<span class="c1"># Get the wrapper object</span>
<span class="n">wrapper</span> <span class="o">=</span> <span class="n">bfabric_interface</span><span class="o">.</span><span class="n">get_wrapper</span><span class="p">()</span>

<span class="c1"># Example API call using the wrapper</span>
<span class="n">results</span> <span class="o">=</span> <span class="n">wrapper</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s2">&quot;sample&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;id&quot;</span><span class="p">:</span> <span class="s2">&quot;1234&quot;</span><span class="p">})</span>
</pre></div>
</div>
</section>
</section>
<hr class="docutils" />
<section id="practical-usage-tips">
<h3>Practical Usage Tips<a class="headerlink" href="#practical-usage-tips" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Always handle potential exceptions by using try-except blocks when retrieving the wrapper, especially in scenarios where token validation status may be uncertain.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="b-fabric-power-user-access">
<h2>6. B-Fabric Power User Access<a class="headerlink" href="#b-fabric-power-user-access" title="Link to this heading">#</a></h2>
<section id="power-user-overview">
<h3>Power User Overview<a class="headerlink" href="#power-user-overview" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>Username</strong>: <strong>gfeeder</strong></p></li>
<li><p><strong>Purpose</strong>: The power user account is used to perform elevated operations in the B-Fabric system, such as reading or modifying restricted data. Ensure that this access is used responsibly and within the bounds of the system's usage policies.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="get-power-user-wrapper">
<h3>get_power_user_wrapper()<a class="headerlink" href="#get-power-user-wrapper" title="Link to this heading">#</a></h3>
<p>Initializes and returns an <strong>authenticated wrapper</strong> for interacting with the <strong>B-Fabric API</strong>. This wrapper is specifically configured for <strong>Power User</strong> access, allowing privileged operations within the system. The default <strong>Power User</strong> login is <strong><code class="docutils literal notranslate"><span class="pre">gfeeder</span></code></strong>.</p>
<p>This function uses the environment information provided in <code class="docutils literal notranslate"><span class="pre">token_data</span></code> to determine the appropriate configuration for initializing the <code class="docutils literal notranslate"><span class="pre">Bfabric</span></code> instance. It reads the configuration from a predefined path (<code class="docutils literal notranslate"><span class="pre">CONFIG_FILE_PATH</span></code>) and applies the environment settings.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">get_power_user_wrapper()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/utils/get_power_user_wrapper.py">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">power_user_wrapper</span> <span class="o">=</span> <span class="n">get_power_user_wrapper</span><span class="p">(</span><span class="n">token_data</span><span class="p">)</span>

</pre></div>
</div>
<hr class="docutils" />
<section id="id22">
<h4>Args:<a class="headerlink" href="#id22" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p><strong>token_data</strong> (<em>dict</em>): A dictionary containing token-related information.</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">&quot;environment&quot;</span></code> key specifies the environment configuration (e.g., production or testing).</p></li>
<li><p>If the <code class="docutils literal notranslate"><span class="pre">&quot;environment&quot;</span></code> key is not provided, it defaults to <code class="docutils literal notranslate"><span class="pre">&quot;None&quot;</span></code>.</p></li>
</ul>
</li>
</ol>
</section>
<hr class="docutils" />
<section id="id23">
<h4>Returns:<a class="headerlink" href="#id23" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p>A <code class="docutils literal notranslate"><span class="pre">Bfabric</span></code> instance, authenticated and configured for the specified environment.</p></li>
</ul>
<hr class="docutils" />
<section id="id24">
<h5>Return Type:<a class="headerlink" href="#id24" title="Link to this heading">#</a></h5>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">bfabric_web_apps.bfabric_web_apps.Bfabric</span></code></p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id25">
<h4>Example Usage<a class="headerlink" href="#id25" title="Link to this heading">#</a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialize the power user wrapper</span>
<span class="n">power_user_wrapper</span> <span class="o">=</span> <span class="n">get_power_user_wrapper</span><span class="p">(</span><span class="n">token_data</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<hr class="docutils" />
<section id="bug-reports">
<h2>7. Bug Reports<a class="headerlink" href="#bug-reports" title="Link to this heading">#</a></h2>
<section id="id26">
<h3>Overview<a class="headerlink" href="#id26" title="Link to this heading">#</a></h3>
<p>The bug-report functionality within the <code class="docutils literal notranslate"><span class="pre">bfabric-web-apps</span></code> Python library utilizes the Unix command-line utility <code class="docutils literal notranslate"><span class="pre">mail</span></code> to send emails from a running application.</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">send_bug_report</span></code> function is invoked, <strong>token details, session details, and entity details</strong> are sent as input parameters from the browser cache. These details are aggregated into a <code class="docutils literal notranslate"><span class="pre">mail_string</span></code>, which is then sent to the <strong>bug-report email address</strong> via a system call to the Unix command-line utility <code class="docutils literal notranslate"><span class="pre">mail</span></code>.</p>
<p><strong>Mail</strong> must therefore be active and running on the deployed system, and accessible to the application process for the bug-report functionality to work.</p>
<p>The default choice of bug-report mail address is <strong>&quot;gwtools&#64;fgcz.system&quot;</strong> which is an OTRS queue, which is only accessible from within FGCZ server hardware. This is adaptable for your own use-case.</p>
<hr class="docutils" />
<section id="modifying-the-bug-report-email-address">
<h4>Modifying the Bug-Report Email Address<a class="headerlink" href="#modifying-the-bug-report-email-address" title="Link to this heading">#</a></h4>
<p>By default, bug reports are sent to <code class="docutils literal notranslate"><span class="pre">gwtools&#64;fgcz.system</span></code>, but you can customize this to fit your organization's needs. The bug-report email address can be modified as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bfabric_web_apps</span><span class="o">.</span><span class="n">BUG_REPORT_EMAIL_ADDRESS</span> <span class="o">=</span> <span class="s2">&quot;my_email@my_domain.com&quot;</span> 
</pre></div>
</div>
<p>This change ensures that bug reports are redirected to your preferred email address instead of the default FGCZ system queue.</p>
<p>For further details on modifying global variables, refer to <a class="reference internal" href="#dynamic-variable-configuration"><span class="xref myst">Chapter 7: Dynamic Variable Configuration</span></a>.</p>
</section>
</section>
<hr class="docutils" />
<section id="submit-bug-report">
<h3>submit_bug_report()<a class="headerlink" href="#submit-bug-report" title="Link to this heading">#</a></h3>
<p>Submits bug reports by collecting the user-provided bug description, along with token and entity data, and then emails these details to the <strong>bug-report email address</strong> configured in <code class="docutils literal notranslate"><span class="pre">bfabric_web_apps.BUG_REPORT_EMAIL_ADDRESS</span></code>. By default, this address is <code class="docutils literal notranslate"><span class="pre">gwtools&#64;fgcz.system</span></code>, but it can be customized as needed.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">submit_bug_report()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/utils/callbacks.py#L92">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">submit_bug_report</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">,</span> <span class="n">bug_description</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">entity_data</span><span class="p">)</span>
</pre></div>
</div>
<section id="id27">
<h4>Args:<a class="headerlink" href="#id27" title="Link to this heading">#</a></h4>
<ol class="arabic simple">
<li><p><strong>n_clicks</strong> (int): Number of times the submit button has been clicked.</p></li>
<li><p><strong>bug_description</strong> (str): Description of the bug provided by the user.</p></li>
<li><p><strong>token</strong> (str): Authentication token.</p></li>
<li><p><strong>entity_data</strong> (dict): Data related to the current entity.</p></li>
</ol>
</section>
<section id="id28">
<h4>Returns:<a class="headerlink" href="#id28" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><strong>tuple</strong>: Two boolean values indicating whether the submission succeeded or failed.</p>
<ul>
<li><p><strong>is_open_success</strong> (bool): True if bug report submission was successful.</p></li>
<li><p><strong>is_open_failure</strong> (bool): True if bug report submission failed.</p></li>
</ul>
</li>
</ul>
</section>
<section id="id29">
<h4>Example<a class="headerlink" href="#id29" title="Link to this heading">#</a></h4>
<p>As a reference, you can check out how this function is used in <a class="reference external" href="https://github.com/GWCustom/bfabric-web-app-template/blob/main/generic_bfabric.py#L73"><code class="docutils literal notranslate"><span class="pre">generic_bfabric.py</span></code></a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@app</span><span class="o">.</span><span class="n">callback</span><span class="p">(</span>
    <span class="p">[</span>
        <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;alert-fade-bug-success&quot;</span><span class="p">,</span> <span class="s2">&quot;is_open&quot;</span><span class="p">),</span>  <span class="c1"># Show success alert.</span>
        <span class="n">Output</span><span class="p">(</span><span class="s2">&quot;alert-fade-bug-fail&quot;</span><span class="p">,</span> <span class="s2">&quot;is_open&quot;</span><span class="p">)</span>      <span class="c1"># Show failure alert.</span>
    <span class="p">],</span>
    <span class="p">[</span><span class="n">Input</span><span class="p">(</span><span class="s2">&quot;submit-bug-report&quot;</span><span class="p">,</span> <span class="s2">&quot;n_clicks&quot;</span><span class="p">)],</span>         <span class="c1"># Detect button clicks.</span>
    <span class="p">[</span>
        <span class="n">State</span><span class="p">(</span><span class="s2">&quot;bug-description&quot;</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">),</span>            <span class="c1"># Bug description input.</span>
        <span class="n">State</span><span class="p">(</span><span class="s2">&quot;token&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">),</span>                       <span class="c1"># Authentication token.</span>
        <span class="n">State</span><span class="p">(</span><span class="s2">&quot;entity&quot;</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">)</span>                       <span class="c1"># Entity metadata.</span>
    <span class="p">],</span>
    <span class="n">prevent_initial_call</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
<span class="k">def</span> <span class="nf">generic_handle_bug_report</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">,</span> <span class="n">bug_description</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">entity_data</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">submit_bug_report</span><span class="p">(</span><span class="n">n_clicks</span><span class="p">,</span> <span class="n">bug_description</span><span class="p">,</span> <span class="n">token</span><span class="p">,</span> <span class="n">entity_data</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
</section>
<hr class="docutils" />
<section id="remote-creation-of-web-applications">
<h1>8. Remote Creation of Web Applications<a class="headerlink" href="#remote-creation-of-web-applications" title="Link to this heading">#</a></h1>
<section id="id30">
<h2>Overview<a class="headerlink" href="#id30" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">create_web_app()</span></code> function allows users to remotely create a new web application by providing necessary inputs such as <strong>name, URL, description, and technology type</strong>. This function eliminates the need to manually open B-Fabric, enabling application creation directly from the terminal.</p>
</section>
<hr class="docutils" />
<section id="create-web-app">
<h2>create_web_app()<a class="headerlink" href="#create-web-app" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">create_web_app()</span></code> function prompts the user for <strong>input parameters</strong> required for creating a web application, validates these inputs, and then submits them to B-Fabric's API.</p>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">create_web_app()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/14-auto-registration-of-apps-in-b-fabric/bfabric_web_apps/utils/create_app_in_bfabric.py">source code on GitHub</a>.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">create_web_app</span><span class="p">()</span>
</pre></div>
</div>
<section id="input-parameters">
<h3>Input Parameters:<a class="headerlink" href="#input-parameters" title="Link to this heading">#</a></h3>
<p>These are the variables used to create the web application. Some require user input, while others have default values.</p>
<div class="pst-scrollable-table-container"><table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Input/Default</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>system</strong></p></td>
<td><p>User Input</p></td>
<td><p>The system where the web app will be created (<code class="docutils literal notranslate"><span class="pre">TEST</span></code> or <code class="docutils literal notranslate"><span class="pre">PROD</span></code>).</p></td>
</tr>
<tr class="row-odd"><td><p><strong>technologyid</strong></p></td>
<td><p>User Input</p></td>
<td><p>The ID corresponding to the chosen application type. Must be selected from available options.</p></td>
</tr>
<tr class="row-even"><td><p><strong>name</strong></p></td>
<td><p>User Input</p></td>
<td><p>The name of the web application.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>weburl</strong></p></td>
<td><p>User Input</p></td>
<td><p>The URL of the web application.</p></td>
</tr>
<tr class="row-even"><td><p><strong>description</strong></p></td>
<td><p>User Input</p></td>
<td><p>A brief description of the web application.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>type</strong></p></td>
<td><p>Default (<code class="docutils literal notranslate"><span class="pre">WebApp</span></code>)</p></td>
<td><p>Defines the application type. Always set to <code class="docutils literal notranslate"><span class="pre">WebApp</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><strong>supervisorid</strong></p></td>
<td><p>Default (<code class="docutils literal notranslate"><span class="pre">2446</span></code>)</p></td>
<td><p>The ID of the supervisor managing the application.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>enabled</strong></p></td>
<td><p>Default (<code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></td>
<td><p>Specifies whether the application is active.</p></td>
</tr>
<tr class="row-even"><td><p><strong>valid</strong></p></td>
<td><p>Default (<code class="docutils literal notranslate"><span class="pre">True</span></code>)</p></td>
<td><p>Indicates whether the application is valid.</p></td>
</tr>
<tr class="row-odd"><td><p><strong>hidden</strong></p></td>
<td><p>Default (<code class="docutils literal notranslate"><span class="pre">False</span></code>)</p></td>
<td><p>Determines whether the application is hidden.</p></td>
</tr>
</tbody>
</table>
</div>
</section>
</section>
<hr class="docutils" />
<section id="id31">
<h2>Example Usage<a class="headerlink" href="#id31" title="Link to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bfabric_web_apps</span> <span class="kn">import</span> <span class="n">create_web_app</span>

<span class="c1"># Run the function to create a new web application</span>
<span class="n">create_web_app</span><span class="p">()</span>
</pre></div>
</div>
<section id="steps-to-fill-out-the-inputs">
<h3>Steps to Fill Out the Inputs:<a class="headerlink" href="#steps-to-fill-out-the-inputs" title="Link to this heading">#</a></h3>
<ol class="arabic simple">
<li><p><strong>Select the System</strong>:</p>
<ul class="simple">
<li><p>Type <code class="docutils literal notranslate"><span class="pre">TEST</span></code> for the test system or <code class="docutils literal notranslate"><span class="pre">PROD</span></code> for the production system.</p></li>
<li><p>If an invalid input is entered, the function will prompt again.</p></li>
</ul>
</li>
<li><p><strong>Choose the Application Type</strong>:</p>
<ul class="simple">
<li><p>Available technologies for <strong>TEST</strong>:</p>
<ul>
<li><p>1: Genomics / Transcriptomics</p></li>
<li><p>2: Proteomics</p></li>
<li><p>4: Metabolomics / Biophysics</p></li>
<li><p>6: General</p></li>
<li><p>10: New Tech</p></li>
</ul>
</li>
<li><p>Available technologies for <strong>PRODUCTION</strong>:</p>
<ul>
<li><p>1: Genomics / Transcriptomics</p></li>
<li><p>2: Proteomics</p></li>
<li><p>4: Metabolomics / Biophysics</p></li>
<li><p>6: General</p></li>
<li><p>10: Bioinformatics</p></li>
</ul>
</li>
<li><p>Select the number corresponding to your application type.</p></li>
</ul>
</li>
<li><p><strong>Provide Additional Information</strong>:</p>
<ul class="simple">
<li><p>Enter the <strong>Application Name</strong>.</p></li>
<li><p>Provide the <strong>Web URL</strong> where the application is hosted.</p></li>
<li><p>Enter a <strong>short description</strong> of the web application.</p></li>
</ul>
</li>
</ol>
<p>Once all inputs are provided, the function submits the data to B-Fabric and confirms successful creation.</p>
<p>Here's a cleaned-up and professional documentation chapter based on your draft. It preserves your structure while improving grammar, clarity, and formatting. I've expanded the explanations and polished the style for easier understanding.</p>
</section>
</section>
</section>
<hr class="docutils" />
<section id="main-job-execution">
<h1>9. Main Job Execution<a class="headerlink" href="#main-job-execution" title="Link to this heading">#</a></h1>
<section id="id32">
<h2>Overview<a class="headerlink" href="#id32" title="Link to this heading">#</a></h2>
<p>The <code class="docutils literal notranslate"><span class="pre">run_main_job</span></code> function is a general-purpose wrapper for executing arbitrary Bash commands in a pipeline workflow. It provides a standardized method for orchestrating common execution tasks:</p>
<ul class="simple">
<li><p>Saving files (remotely)</p></li>
<li><p>Bash command execution</p></li>
<li><p>Workunit creation in B-Fabric</p></li>
<li><p>Resource registration in B-Fabric</p></li>
<li><p>Attaching result files as links in B-Fabric</p></li>
<li><p>Automatic service charging in B-Fabric</p></li>
</ul>
<p>This function also includes comprehensive logging to facilitate debugging, transparency, and traceability throughout the workflow.</p>
</section>
<hr class="docutils" />
<section id="run-main-job">
<h2>run_main_job()<a class="headerlink" href="#run-main-job" title="Link to this heading">#</a></h2>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">run_main_job</span><span class="p">(</span>
    <span class="n">files_as_byte_strings</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> 
    <span class="n">bash_commands</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> 
    <span class="n">resource_paths</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span>
    <span class="n">attachment_paths</span><span class="p">:</span> <span class="nb">dict</span><span class="p">,</span> 
    <span class="n">token</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">service_id</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
    <span class="n">charge</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="p">[],</span>
<span class="p">)</span>
</pre></div>
</div>
<p>If you want to explore the implementation of the <code class="docutils literal notranslate"><span class="pre">run_main_job()</span></code> function in more detail, check out the <a class="reference external" href="https://github.com/GWCustom/bfabric-web-apps/blob/main/bfabric_web_apps/utils/run_main_pipeline.py">source code on GitHub</a>.</p>
</section>
<hr class="docutils" />
<section id="arguments">
<h2>Arguments<a class="headerlink" href="#arguments" title="Link to this heading">#</a></h2>
<section id="files-as-byte-strings-dict">
<h3>files_as_byte_strings (dict)<a class="headerlink" href="#files-as-byte-strings-dict" title="Link to this heading">#</a></h3>
<p>A dictionary mapping destination file paths (on the external computation server) to their byte-encoded contents. This is used for transferring files to a remote server when the job is enqueued via Redis. If the function is executed locally, this can be left empty.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>All files must be provided as <strong>byte strings</strong>!</p>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">files_as_byte_strings</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;./samplesheet.csv&quot;</span><span class="p">:</span> <span class="n">read_file_as_bytes</span><span class="p">(</span><span class="s2">&quot;./samplesheet.csv&quot;</span><span class="p">),</span>
    <span class="s2">&quot;./NFC_RNA.config&quot;</span><span class="p">:</span> <span class="n">read_file_as_bytes</span><span class="p">(</span><span class="s2">&quot;./NFC_RNA.config&quot;</span><span class="p">)</span>
<span class="p">}</span>
</pre></div>
</div>
<p>In this example, the sample sheet and config file are read as byte strings and prepared for transfer to the external server.</p>
</section>
<hr class="docutils" />
<section id="bash-commands-list-str">
<h3>bash_commands (list[str])<a class="headerlink" href="#bash-commands-list-str" title="Link to this heading">#</a></h3>
<p>A list of Bash commands that will be executed sequentially on the computation server. Standard output and errors from each command are captured and logged.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">bash_commands</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">&quot;rm -Rf /STORAGE/temp_rnaseq_run/work&quot;</span><span class="p">,</span>
    <span class="s2">&quot;mkdir /STORAGE/OUTPUT_rnaseq_2025-05-08_12-00-00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;/home/nfc/.local/bin/nextflow run nf-core/rnaseq --input /STORAGE/temp_rnaseq_run/samplesheet.csv ...&quot;</span>
<span class="p">]</span>
</pre></div>
</div>
<p>These commands clean up the previous working directory, create a new output folder, and execute the pipeline.</p>
</section>
<hr class="docutils" />
<section id="resource-paths-dict">
<h3>resource_paths (dict)<a class="headerlink" href="#resource-paths-dict" title="Link to this heading">#</a></h3>
<p>A mapping of output <strong>files or folders</strong> (generated by the pipeline) to B-Fabric container IDs. All listed resources will be registered in B-Fabric under the corresponding container.</p>
<p>If a folder path is provided, <strong>all files in that folder and its subdirectories</strong> will be recursively registered as individual B-Fabric resources.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">resource_paths</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;/STORAGE/OUTPUT_rnaseq_2025-05-08_12-00-00&quot;</span><span class="p">:</span> <span class="mi">37767</span>
<span class="p">}</span>
</pre></div>
</div>
<p>This registers all output files from the specified directory under container ID <code class="docutils literal notranslate"><span class="pre">37767</span></code>.</p>
</section>
<hr class="docutils" />
<section id="attachment-paths-dict">
<h3>attachment_paths (dict)<a class="headerlink" href="#attachment-paths-dict" title="Link to this heading">#</a></h3>
<p>A dictionary mapping output file paths to human-readable filenames. These files will be attached as download links in the B-Fabric web interface, typically for QC reports, logs, or summaries.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">attachment_paths</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;/STORAGE/OUTPUT_rnaseq_2025-05-08_12-00-00/multiqc/star_salmon/multiqc_report.html&quot;</span><span class="p">:</span> <span class="s2">&quot;multiqc_report.html&quot;</span><span class="p">,</span>
    <span class="s2">&quot;/STORAGE/OUTPUT_rnaseq_2025-05-08_12-00-00/star_salmon/deseq2_qc/deseq2.plots.pdf&quot;</span><span class="p">:</span> <span class="s2">&quot;deseq2.plots.pdf&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>These attachments allow end users to quickly view or download important result files via B-Fabric.</p>
</section>
<hr class="docutils" />
<section id="token-str">
<h3>token (str)<a class="headerlink" href="#token-str" title="Link to this heading">#</a></h3>
<p>The B-Fabric authentication token (a raw URL token). This token is required for interacting with the B-Fabric API, such as creating workunits, registering files, and adding download links.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">token</span> <span class="o">=</span> <span class="n">url_params</span>  <span class="c1"># Passed from the frontend or callback context</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="service-id-int-optional">
<h3>service_id (int, optional)<a class="headerlink" href="#service-id-int-optional" title="Link to this heading">#</a></h3>
<p>The ID of the B-Fabric service to which the job execution should be billed. If no billing is required, use the default value of <code class="docutils literal notranslate"><span class="pre">0</span></code>.</p>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">service_id</span> <span class="o">=</span> <span class="n">bfabric_web_apps</span><span class="o">.</span><span class="n">SERVICE_ID</span>  <span class="c1"># e.g., 59 for RNA-seq</span>
</pre></div>
</div>
</section>
<hr class="docutils" />
<section id="charge-list-int-optional">
<h3>charge (list[int], optional)<a class="headerlink" href="#charge-list-int-optional" title="Link to this heading">#</a></h3>
<p>A list of container IDs to be billed for executing the job. This allows the system to attribute computational costs to specific project containers.</p>
<p>If you are using the integrated charge switch from the <code class="docutils literal notranslate"><span class="pre">bfabric_web_apps</span></code> components, the <code class="docutils literal notranslate"><span class="pre">charge</span></code> list should be derived from the switch state.</p>
<p>For more details, see the chapter <strong><a class="reference internal" href="important_components.html#charge-switch"><span class="std std-ref">Important Components</span></a></strong>.</p>
<p>To convert the boolean switch to a valid list of container IDs, use the following pattern:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Update charge_run based on its value</span>
<span class="k">if</span> <span class="n">charge_run</span> <span class="ow">and</span> <span class="n">project_id</span><span class="p">:</span>
    <span class="n">charge_run</span> <span class="o">=</span> <span class="p">[</span><span class="n">project_id</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">charge_run</span> <span class="o">=</span> <span class="p">[]</span>
</pre></div>
</div>
<p><strong>Example:</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">charge</span> <span class="o">=</span> <span class="p">[</span><span class="mi">37767</span><span class="p">]</span>  <span class="c1"># Charge container ID 37767</span>
</pre></div>
</div>
<p>If no charging is required, this can be an empty list (<code class="docutils literal notranslate"><span class="pre">[]</span></code>).</p>
</section>
</section>
<hr class="docutils" />
<section id="function-steps-behavior">
<h2>Function Steps &amp; Behavior<a class="headerlink" href="#function-steps-behavior" title="Link to this heading">#</a></h2>
<section id="step-1-saving-files">
<h3>Step 1: Saving Files<a class="headerlink" href="#step-1-saving-files" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>If the function is executed on an external computation server (via Redis), the files provided as byte strings are saved to their specified destination paths as normal files.</p></li>
<li><p>Each file write operation is logged, and any errors during the write process are recorded.</p></li>
</ul>
</section>
<section id="step-2-bash-command-execution">
<h3>Step 2: Bash Command Execution<a class="headerlink" href="#step-2-bash-command-execution" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Executes each Bash command using <code class="docutils literal notranslate"><span class="pre">subprocess</span></code> (or similar).</p></li>
<li><p>Output and errors from each command are logged in detail for traceability.</p></li>
<li><p>Commands are executed in the order provided.</p></li>
</ul>
</section>
<section id="step-3-workunit-creation">
<h3>Step 3: Workunit Creation<a class="headerlink" href="#step-3-workunit-creation" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>For each container ID in the <code class="docutils literal notranslate"><span class="pre">resource_paths</span></code>, a new workunit is created in B-Fabric.</p></li>
<li><p>Workunit IDs are logged for future tracking.</p></li>
<li><p>If a workunit creation fails, an error is logged.</p></li>
</ul>
</section>
<section id="step-4-resource-registration">
<h3>Step 4: Resource Registration<a class="headerlink" href="#step-4-resource-registration" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Files or directories specified in <code class="docutils literal notranslate"><span class="pre">resource_paths</span></code> are registered in B-Fabric as output resources.</p></li>
<li><p>The system associates each output with the corresponding workunit.</p></li>
<li><p>Success and failure of each resource registration is logged.</p></li>
</ul>
</section>
<section id="step-5-attachment-as-links">
<h3>Step 5: Attachment as Links<a class="headerlink" href="#step-5-attachment-as-links" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>Files specified in <code class="docutils literal notranslate"><span class="pre">attachment_paths</span></code> are copied to shared storage (e.g., FGCZ shared space).</p></li>
<li><p>These files are then linked in B-Fabric under the given filenames.</p></li>
<li><p>Each attachment link creation is logged.</p></li>
</ul>
</section>
<section id="step-6-automatic-charging">
<h3>Step 6: Automatic Charging<a class="headerlink" href="#step-6-automatic-charging" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p>If a <code class="docutils literal notranslate"><span class="pre">service_id</span></code> and <code class="docutils literal notranslate"><span class="pre">charge</span></code> list are provided, the corresponding containers are charged automatically for the service.</p></li>
<li><p>If no <code class="docutils literal notranslate"><span class="pre">service_id</span></code> is provided, this step is skipped.</p></li>
<li><p>Charging operations are logged.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="return-value">
<h3>Return Value<a class="headerlink" href="#return-value" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>None</strong></p></li>
<li><p>All activities are logged for debugging and traceability.</p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="id33">
<h2>Example Usage<a class="headerlink" href="#id33" title="Link to this heading">#</a></h2>
<section id="local-execution">
<h3>1 Local Execution<a class="headerlink" href="#local-execution" title="Link to this heading">#</a></h3>
<p>For smaller jobs or when running the job directly on the same server:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">run_main_job</span><span class="p">(</span>
    <span class="n">files_as_byte_strings</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">bash_commands</span><span class="o">=</span><span class="p">[</span><span class="n">bash_command</span><span class="p">],</span>
    <span class="n">resource_paths</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">attachment_paths</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">token</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
    <span class="n">service_id</span><span class="o">=</span><span class="n">bfabric_web_apps</span><span class="o">.</span><span class="n">SERVICE_ID</span><span class="p">,</span>
    <span class="n">charge</span><span class="o">=</span><span class="n">charge_run</span>
<span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>No file transfer is required; paths are assumed to exist locally.</p></li>
<li><p>Suitable for quick, lightweight operations.</p></li>
</ul>
</section>
<hr class="docutils" />
<section id="remote-execution-via-redis-queue">
<h3>2 Remote Execution via Redis Queue<a class="headerlink" href="#remote-execution-via-redis-queue" title="Link to this heading">#</a></h3>
<p>For larger workflows, offload job execution to a computational server using Redis:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">bfabric_web_apps.utils.redis_queue</span> <span class="kn">import</span> <span class="n">q</span>

<span class="n">q</span><span class="p">(</span><span class="n">queue</span><span class="p">)</span><span class="o">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">run_main_job</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span>
    <span class="s2">&quot;files_as_byte_strings&quot;</span><span class="p">:</span> <span class="n">files_as_byte_strings</span><span class="p">,</span>
    <span class="s2">&quot;bash_commands&quot;</span><span class="p">:</span> <span class="n">bash_commands</span><span class="p">,</span>
    <span class="s2">&quot;resource_paths&quot;</span><span class="p">:</span> <span class="n">resource_paths</span><span class="p">,</span>
    <span class="s2">&quot;attachment_paths&quot;</span><span class="p">:</span> <span class="n">attachment_paths</span><span class="p">,</span>
    <span class="s2">&quot;token&quot;</span><span class="p">:</span> <span class="n">url_params</span><span class="p">,</span>
    <span class="s2">&quot;service_id&quot;</span><span class="p">:</span> <span class="n">bfabric_web_apps</span><span class="o">.</span><span class="n">SERVICE_ID</span><span class="p">,</span>
    <span class="s2">&quot;charge&quot;</span><span class="p">:</span> <span class="n">charge_run</span>
<span class="p">})</span>
</pre></div>
</div>
<ul class="simple">
<li><p>All necessary files are serialized as byte strings and sent over the queue.</p></li>
<li><p>Job runs asynchronously on a remote worker.</p></li>
<li><p>Ideal for heavy computational pipelines (e.g., RNA-seq, Demultiplex etc.).</p></li>
</ul>
<hr class="docutils" />
<section id="the-q-function">
<h4>The q() Function<a class="headerlink" href="#the-q-function" title="Link to this heading">#</a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">q()</span></code> utility is a simple wrapper around the <a class="reference external" href="https://python-rq.org/">RQ (Redis Queue)</a> library. It creates and returns a configured <code class="docutils literal notranslate"><span class="pre">Queue</span></code> object connected to the Redis backend:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">q</span><span class="p">(</span><span class="n">queue_name</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">Queue</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="n">queue_name</span><span class="p">,</span> <span class="n">connection</span><span class="o">=</span><span class="n">conn</span><span class="p">,</span> <span class="n">default_timeout</span><span class="o">=</span><span class="mi">10000000</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="explanation">
<h4>Explanation:<a class="headerlink" href="#explanation" title="Link to this heading">#</a></h4>
<ul class="simple">
<li><p><strong><code class="docutils literal notranslate"><span class="pre">queue_name</span></code></strong>: The name of the queue to which the job should be submitted (e.g., <code class="docutils literal notranslate"><span class="pre">&quot;light&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;heavy&quot;</span></code>).</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">connection=conn</span></code></strong>: Uses the preconfigured Redis connection from <code class="docutils literal notranslate"><span class="pre">redis_connection.py</span></code>.</p></li>
<li><p><strong><code class="docutils literal notranslate"><span class="pre">default_timeout=10000000</span></code></strong>: Sets a high timeout value to support long-running jobs without early termination.</p></li>
</ul>
<p>This abstraction simplifies job submission and ensures consistent queue behavior across the B-Fabric app ecosystem.</p>
</section>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">Important Functions</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#application-initialization">1. Application Initialization</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-app">create_app()</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#returns">Returns:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#return-type">Return type:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-usage">Example Usage</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#understanding-the-app-object-in-dash">Understanding the app Object in Dash</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ui-and-layout-management">2. UI and Layout Management</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-static-layout">get_static_layout()</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#args">Args:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">Returns:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">Return type:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">Example Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#authentication-token-handling">3. Authentication &amp; Token Handling</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#process-url-and-token">process_url_and_token()</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">Args:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#processing-steps">Processing Steps:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">Returns:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#example-usage-callback-integration">Example Usage - Callback Integration</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#logging">4. Logging</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">Overview</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#accessing-logs-in-b-fabric">Accessing Logs in B-Fabric</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#through-web-applications">Through Web Applications</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#initializing-a-logger-instance">Initializing a Logger Instance</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#get-logger">get_logger()</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">Args:</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">Returns:</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">Return Type::</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#example">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#creating-logs-manual-and-automatic-methods">Creating Logs: Manual and Automatic Methods</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#log-operation">log_operation()</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">Args:</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">Returns:</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">Example</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#logthis">logthis()</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">Args:</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id14">Returns:</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id15">Return Type:</a></li>
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id16">Example</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#flush-logs">flush_logs()</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id17">Args:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id18">Returns:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#behavior">Behavior:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id19">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#b-fabric-wrapper">5. B-Fabric Wrapper</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id20">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#wrapper-initialization">Wrapper Initialization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#retrieving-the-b-fabric-wrapper">Retrieving the B-Fabric Wrapper</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-wrapper">get_wrapper()</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#method-definition">Method Definition</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#exception-handling">Exception Handling</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#usage-example">Usage Example</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#importing-the-b-fabric-interface">Importing the B-Fabric Interface</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-the-wrapper">Getting the Wrapper</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#important-considerations">Important Considerations</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id21">Example:</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#practical-usage-tips">Practical Usage Tips</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#b-fabric-power-user-access">6. B-Fabric Power User Access</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#power-user-overview">Power User Overview</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#get-power-user-wrapper">get_power_user_wrapper()</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id22">Args:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id23">Returns:</a><ul class="nav section-nav flex-column">
<li class="toc-h5 nav-item toc-entry"><a class="reference internal nav-link" href="#id24">Return Type:</a></li>
</ul>
</li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id25">Example Usage</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#bug-reports">7. Bug Reports</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id26">Overview</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#modifying-the-bug-report-email-address">Modifying the Bug-Report Email Address</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#submit-bug-report">submit_bug_report()</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id27">Args:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id28">Returns:</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#id29">Example</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#remote-creation-of-web-applications">8. Remote Creation of Web Applications</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id30">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#create-web-app">create_web_app()</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#input-parameters">Input Parameters:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id31">Example Usage</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#steps-to-fill-out-the-inputs">Steps to Fill Out the Inputs:</a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#main-job-execution">9. Main Job Execution</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id32">Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#run-main-job">run_main_job()</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arguments">Arguments</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#files-as-byte-strings-dict">files_as_byte_strings (dict)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#bash-commands-list-str">bash_commands (list[str])</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#resource-paths-dict">resource_paths (dict)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#attachment-paths-dict">attachment_paths (dict)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#token-str">token (str)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#service-id-int-optional">service_id (int, optional)</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#charge-list-int-optional">charge (list[int], optional)</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#function-steps-behavior">Function Steps &amp; Behavior</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-1-saving-files">Step 1: Saving Files</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-2-bash-command-execution">Step 2: Bash Command Execution</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-3-workunit-creation">Step 3: Workunit Creation</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-4-resource-registration">Step 4: Resource Registration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-5-attachment-as-links">Step 5: Attachment as Links</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#step-6-automatic-charging">Step 6: Automatic Charging</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#return-value">Return Value</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id33">Example Usage</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#local-execution">1 Local Execution</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#remote-execution-via-redis-queue">2 Remote Execution via Redis Queue</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#the-q-function">The q() Function</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#explanation">Explanation:</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=26a4bc78f4c0ddb94549"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=26a4bc78f4c0ddb94549"></script>

<footer class="bd-footer">
  <div class="bd-footer__inner bd-page-width" style="padding: 20px 0;"> <!-- Adjust padding to reduce height -->
    <div class="footer-items__start">
      <div class="footer-item">
        <p class="copyright">
           Copyright 2025, GWC GmbH.
        </p>
      </div>
    </div>
  </div>
</footer>

  </body>
</html>